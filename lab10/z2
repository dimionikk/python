import matplotlib.pyplot as plt
import csv

# Функція для зчитування даних з CSV-файлу
def read_data(filename):
    data = {}   # словник для зберігання даних по країнах
    years = []  # список для зберігання років
    with open(filename, 'r') as file:
        reader  = csv.reader(file)  # читає CSV
        headers = next(reader)     # зчитує заголовки
        years   = [header.split(' ')[0] for header in headers[4:]] # отримуємо роки з заголовків
        for row in reader:
            if not row[0].strip(): continue  # пропускає порожні рядки  
            country = row[0]  # назва країни
            values  = []      # список значень показника
            for value in row[4:]: 
                if value == '..': values.append(0)   # якщо даних немає ставимо 0
                else:
                    try: values.append(float(value))
                    except ValueError: values.append(0)
            data[country] = values 
    return years, data  

# Функція побудови лінійного графіка для двох країн
def plot_line_chart(years, data, country1, country2):
    plt.figure(figsize=(12, 6))                                  # розмір графіка
    plt.plot(years, data[country1], label=country1, marker='o')  # графік першої країни
    plt.plot(years, data[country2], label=country2, marker='o')  # графік другої країни
    plt.xlabel('Рік')                          # підпис осі X
    plt.ylabel('Кількість дітей поза школою')  # підпис осі Y
    plt.title('Динаміка кількості дітей поза школою (початкова школа)')  # заголовок графіка
    plt.legend()    # легенда для графіків
    plt.grid(True)  # відображення сітки
    plt.show()  # показуємо графік

# Функція для побудови стовпчастої діаграми для однієї країни
def plot_bar_chart(years, data, country):
    plt.figure(figsize=(12, 6))   
    plt.bar(years, data[country])  
    plt.xlabel('Рік')  
    plt.ylabel('Кількість дітей поза школою') 
    plt.title(f'Кількість дітей поза школою в {country}')  
    plt.show()  


filename = 'wb1.csv' 
years, data = read_data(filename)  
while True:
    print("Меню:")
    print("1. Лінійний графік для України та Великої Британії")
    print("2. Стовпчаста діаграма для обраної країни")
    print("3. Вийти")
    choice = input("Оберіть дію: ")

    if choice == "1": plot_line_chart(years, data, 'Ukraine', 'United Kingdom')  
    elif choice == "2":
        country = input("Введіть назву країни: ") 
        if country in data: plot_bar_chart(years, data, country)
        else:               print("Така країна відсутня")
    elif choice == "3": print("Вихід з програми"); break
    else:               print("Неправильний вибір")
